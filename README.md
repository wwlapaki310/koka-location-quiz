# 校歌場所当てゲーム (Koka Location Quiz)

## 📝 プロジェクト概要

テレビ番組で見かけた「校歌の歌詞から学校の場所を推測する」ゲームをWebアプリ・スマホアプリ化するプロジェクトです。

### ゲームの仕組み
- 中学校の校歌から学校名を伏せた歌詞を表示
- 地図を見ながら（検索機能は使わず）どの学校かを予想
- 3回勝負でスコアを競う

## 🚀 **現在の状況（2025年8月更新）**

### ✅ **MVP完成済み**
`/mvp` フォルダに基本的なクイズアプリが実装済みです：

**実装済み機能：**
- ✅ React + Vite + TypeScript + Tailwind CSS
- ✅ 4択クイズシステム
- ✅ 5校分のサンプルデータ
- ✅ スコア表示・ゲーム進行
- ✅ レスポンシブデザイン

**技術スタック（確定）：**
```javascript
{
  "frontend": "React + Vite + TypeScript",
  "styling": "Tailwind CSS",
  "icons": "Lucide React",
  "deployment": "Vercel Ready"
}
```

### 🎯 **次のステップ - 地図中心UI改善**
[**Issue #7**](../../issues/7) で詳細を管理中：

**課題：**
- 現在は4択がメインで、本来の面白さ「地図から探す」が活かされていない
- 校歌の全文が読めない（マスク済みのみ）
- ヒント機能がなく難易度調整ができない

**改善方針：**
```
校歌全文表示 → 地図で回答（メイン） → 困ったらヒント（4択表示）
```

**実装予定：**
- 🗺️ 地図機能をメインUIに（Leaflet + OpenStreetMap）
- 📖 校歌全文表示機能
- 💡 段階的ヒント機能（都道府県→地域→4択）
- 📊 ヒント使用によるスコア調整

### 🎮 ゲーム体験の進化

**現在のMVP:**
```
歌詞（マスク済み）→ 4択選択 → 結果表示
```

**目指す体験:**
```
歌詞（全文）→ 地図で推測 → [ヒント1: 都道府県] → [ヒント2: 地域] → [ヒント3: 4択] → 結果表示
```

## 🎯 プロジェクト目標

1. **教育的価値**: 日本の地理・文化への理解促進
2. **エンターテイメント性**: 楽しく学べるクイズゲーム
3. **技術的挑戦**: モダンなWeb/モバイルアプリ開発
4. **データ活用**: 校歌という文化資産のデジタル化

## 📊 校歌に関する調査結果

### 校歌の歴史と意義

#### 歴史的背景
- **起源**: 明治30年代（1897年頃）から制定開始
- **最古の校歌**: 東京女子師範学校（現お茶の水女子大学）1878年
- **法的位置づけ**: 法令による制定義務はないが、慣習的に存在
- **文化的特徴**: 日本・中国・韓国など東アジア特有の文化（欧米にはほぼ存在しない）

#### 制作過程の変遷
- **明治期**: 文部省による認可制度（1894年～）
- **初期**: 同一歌詞の校歌が複数校で使用される例が多数
- **大正期以降**: 各校独自性を重視、地域環境を歌詞に反映
- **1930年頃**: 全国的に校歌が普及
- **戦後**: 軍国調の校歌から新時代に適した校歌への改変

#### 歌詞の特徴
校歌の歌詞によく歌われる内容：
- 学校所在地周辺の自然・地理・風土・具体的地名
- 学校の標語・校訓・教育理念・校風
- 建学の精神・歴史的背景

## 📈 市場データ

### 中学校数（2024年現在）
- **全国総数**: 9,882校
- **公立**: 約91%（減少傾向）
- **私立**: 約7.9%（増加傾向、1990年比約1.3倍）
- **国立**: 68校（全体の1%未満）

### データの利用可能性
- **信時潔データベース**: 893校の校歌データ（作詞者、歌い出し、日付等）
- **国立国会図書館**: 校歌関連資料多数
- **地方自治体**: 各地域の校歌集が存在

## 🏗️ システムアーキテクチャ

### 確定済み技術スタック

#### フロントエンド（実装済み）
- **Web**: React + Vite + TypeScript
- **UI/UX**: Tailwind CSS
- **アイコン**: Lucide React

#### 追加予定技術
- **地図**: React Leaflet + OpenStreetMap
- **状態管理**: React Hooks（useState, useEffect）
- **デプロイ**: Vercel

#### 将来検討
- **バックエンド**: Node.js + Express または Python + FastAPI
- **データベース**: PostgreSQL + Redis（キャッシュ）
- **認証**: Firebase Auth または Auth0

### データ構造設計（更新版）

```typescript
interface SchoolData {
  id: number;
  schoolName: string;
  prefecture: string;
  city: string;
  address: string;
  coordinates: {        // 新規追加予定
    lat: number;
    lng: number;
  };
  songTitle: string;
  lyrics: string;       // 全文歌詞（新規追加予定）
  maskedLyrics: string; // 既存のマスク済み
  difficulty: 'easy' | 'medium' | 'hard';
  notes: string;
  hints: {              // 新規追加予定
    prefecture: string; // 都道府県ヒント
    region: string;     // 地域ヒント  
    landmark: string;   // 地理的特徴ヒント
  };
}
```

## 🎮 ゲーム仕様

### 現在のMVP仕様
1. **ゲーム開始画面**: ルール説明とスタートボタン
2. **クイズ画面**: 
   - マスク済み校歌歌詞表示
   - 4択選択肢（学校名）
   - 難易度表示
3. **結果画面**: 正解・不正解、学校情報、スコア
4. **最終結果**: 5問完了後の総合スコア

### 次期バージョン仕様（Issue #7）
1. **校歌全文表示**: 学校名も含む完全版歌詞
2. **地図メインUI**: 
   - 左側：歌詞表示
   - 右側：日本地図（メインエリア）
   - 下部：ヒント・操作ボタン
3. **段階的ヒント機能**:
   - ヒント1：都道府県レベル（-20点）
   - ヒント2：地域・市レベル（-40点）
   - ヒント3：4択表示（-60点）
4. **地図回答**: クリックした地点での正解判定

### 難易度設定
- **Easy**: 有名な地名・特徴的な自然環境が歌詞に含まれる
- **Medium**: 一般的な地理的特徴
- **Hard**: 抽象的表現や歴史的背景が中心

## 🚀 開発フェーズ（更新版）

### ~~Phase 1: 基盤構築~~ ✅ **完了**
- [x] 技術選定確定（React + Vite + TypeScript）
- [x] 開発環境構築
- [x] 基本UI/UXデザイン
- [x] MVPアプリ実装

### Phase 2: UI/UX改善（進行中）
**Issue #7で管理中**
- [ ] 地図機能実装（React Leaflet）
- [ ] レイアウト再設計（歌詞+地図）
- [ ] 校歌全文表示機能
- [ ] 段階的ヒント機能

### Phase 3: データ拡張（4週間）
- [ ] 学校座標データの追加
- [ ] 校歌全文データの収集・整理
- [ ] ヒントデータの作成
- [ ] データ品質向上

### Phase 4: 機能拡張（6週間）
- [ ] ユーザー認証
- [ ] ランキング機能
- [ ] 実績システム
- [ ] SNS連携

### Phase 5: テスト・リリース（4週間）
- [ ] 総合テスト
- [ ] パフォーマンス最適化
- [ ] 本格リリース
- [ ] 運用保守体制構築

## ⚖️ 課題・リスク

### 著作権・法的課題
- **校歌の著作権**: 作詞者・作曲者の権利確認が必要
- **パブリックドメイン**: 古い校歌（1953年以前の没作者）の活用
- **使用許可**: 現代の校歌使用には権利者許可が必要

### データ収集の課題
- **データ入手困難**: 統一されたデータベースが存在しない
- **品質確保**: 歌詞の正確性確保
- **網羅性**: 全国9,882校の完全カバーは困難

### 技術的課題
- **パフォーマンス**: 大量データの効率的処理
- **セキュリティ**: ユーザーデータの安全な管理
- **スケーラビリティ**: ユーザー増加への対応

### ビジネス課題
- **収益モデル**: 広告/課金システムの検討
- **継続性**: 長期運用のための体制構築
- **競合**: 類似サービスとの差別化

## 💡 差別化ポイント

1. **教育的価値**: 単なるクイズではなく文化学習ツール
2. **地域密着**: 各地方の特色を活かしたコンテンツ
3. **データの質**: 学術的価値のある校歌データベース構築
4. **ユーザー体験**: 直感的で楽しいUI/UX

## 🎨 UI/UXコンセプト

### デザイン方針
- **親しみやすさ**: 老若男女が楽しめるインターフェース
- **視認性**: 地図と歌詞の同時表示での見やすさ
- **応答性**: 快適な操作感
- **学習促進**: 正解後の詳細情報表示

### ターゲットユーザー
- **主要**: 20-50代の日本在住者
- **副次**: 日本文化に興味のある海外ユーザー
- **教育**: 学校での地理・社会科教材として

## 📚 参考資料

- 渡辺裕『校歌斉唱！―日本人が育んだ学校文化の謎―』新潮社
- 須田珠生『校歌の誕生』人文書院
- [信時潔研究ガイド - 校歌データベース](https://nobutoki.com/koka_db)
- [文部科学省 学校基本調査](https://www.mext.go.jp/b_menu/toukei/chousa01/kihon/1267995.htm)

## 🔄 プロジェクト管理

### Issue管理
- 機能要件: `feature` ラベル
- 技術検討: `technical` ラベル  
- データ関連: `data` ラベル
- UI/UX: `design` ラベル
- 優先度: `P0`(最高) ~ `P3`(低)

### 進捗管理
- GitHub Projects使用
- 週次レビュー実施
- マイルストーン設定

## 📱 アプリケーション実行方法

```bash
# MVPアプリの起動
cd mvp
npm install
npm run dev
```

ブラウザで `http://localhost:5173` にアクセス

---

**最終更新**: 2025年8月1日  
**ステータス**: MVP完成済み、UI改善フェーズ進行中  
**次のアクション**: Issue #7（地図中心UI改善）の実装  
**現在のマイルストーン**: 地図機能実装とヒント機能追加